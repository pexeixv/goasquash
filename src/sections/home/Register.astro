<section class="px-4" id="register">
  <div class="w-full max-w-2xl bg-slate-800 mx-auto -mt-16 rounded-t-lg p-8">
    <form action="" class="flex flex-col items-center gap-5">
      <div class="w-full grid gap-5 sm:grid-cols-2">
        <div class="form-control w-full max-w-xs mx-auto flex flex-col">
          <label class="label">
            <span class="label-text">Name <span class="text-red-500 text-lg">*</span> </span>
          </label>
          <input
          required="required"
            type="text"
            placeholder="John Doe"
            class="input input-bordered w-full max-w-xs"
          />
        </div>
        <div class="form-control w-full max-w-xs mx-auto flex flex-col">
          <label class="label">
            <span class="label-text">Phone number <span class="text-red-500 text-lg">*</span> </span>
          </label>
          <input
          required="required"
            type="tel"
            placeholder="9822334455"
            class="input input-bordered w-full max-w-xs"
          />
        </div>
      </div>
      <div class="w-full grid gap-5 sm:grid-cols-2">
        <div class="form-control w-full max-w-xs mx-auto flex flex-col">
          <label class="label">
            <span class="label-text">Email address <span class="text-red-500 text-lg">*</span> </span>
          </label>
          <input
          required="required"
            type="email"
            placeholder="john@doe.com"
            class="input input-bordered w-full max-w-xs"
          />
        </div>
        <div class="form-control w-full max-w-xs mx-auto flex flex-col">
          <label class="label">
            <span class="label-text">Date of birth <span class="text-red-500 text-lg">*</span> </span>
          </label>
          <input required="required" placeholder="mm/dd/yyyy" type="date" class="input input-bordered w-full max-w-xs" />
        </div>
      </div>
      <div class="w-full grid gap-5 sm:grid-cols-2">
        <div class="form-control w-full max-w-xs mx-auto flex flex-col">
          <label class="label">
            <span class="label-text">GAS Registration Number <span class="text-red-500 text-lg">*</span> </span>
          </label>
          <input
          required="required"
            type="text"
            placeholder="XXXX1234"
            class="input input-bordered w-full max-w-xs"
          />
        </div>
        <div class="form-control w-full max-w-xs mx-auto flex flex-col">
          <label class="label">
            <span class="label-text">iSpin number </span>
          </label>
          <input type="text" placeholder="XXXX1234" class="input input-bordered w-full max-w-xs" />
        </div>
      </div>
      <div class="w-full hidden" id="parents-details">
        <div class="w-full grid gap-5 sm:grid-cols-2">
            <div class="form-control w-full max-w-xs mx-auto flex flex-col">
              <label class="label">
                <span class="label-text">Parent's name <span class="text-red-500 text-lg">*</span> </span>
              </label>
              <input
                type="text"
                placeholder="Jane Doe"
                class="input input-bordered w-full max-w-xs"
              />
            </div>
            <div class="form-control w-full max-w-xs mx-auto flex flex-col">
              <label class="label">
                <span class="label-text">Parent's phone number <span class="text-red-500 text-lg">*</span></span>
              </label>
              <input type="tel" placeholder="9822334455" class="input input-bordered w-full max-w-xs" />
            </div>
          </div>
      </div>
      <button class="btn btn-primary mt-4">Submit</button>
    </form>
    <p class="text-center text-xs text-slate-50 mt-8">Society Regn. #138/Goa/2014 dated 13 Sept. 2014</p>
  </div>
</section>

<script is:inline>
  const calculateAge = (dob) => {
    const birthDate = new Date(dob)
    const currentDate = new Date();
    const birthYear = birthDate.getFullYear();
    const birthMonth = birthDate.getMonth();
    const birthDay = birthDate.getDate();
    const currentYear = currentDate.getFullYear();
    const currentMonth = currentDate.getMonth();
    const currentDay = currentDate.getDate();
    let age = currentYear - birthYear;
    if (
      currentMonth < birthMonth ||
      (currentMonth === birthMonth && currentDay < birthDay)
    )
      age--;
    return age;
  };

  const getFormattedDate = (date) => {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  };

  const today = new Date();
  const formattedDate = getFormattedDate(today);
  const dateInput = document.querySelector('input[type="date"]');
  dateInput.setAttribute("max", formattedDate);
  dateInput.setAttribute("min", "1950-01-01");

  const parentsDetails = document.querySelector('#parents-details')

  dateInput.addEventListener('input', e=>{
    const inputtedDate = e.target.value
    if(calculateAge(inputtedDate)<18)
        parentsDetails.classList.remove('hidden')
    else parentsDetails.classList.add('hidden')
  })

</script>
